The flag 'directory' used in rule all is only valid for outputs, not inputs.
Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 6
Rules claiming more threads will be scaled down.
Conda environments: ignored
Job counts:
	count	jobs
	1	all
	2	bowtie2
	1	bowtie2_build
	2	fastp_se
	2	minimap2
	1	minimap2_index
	1	multiqc
	2	samtools_decontaminated
	1	woltka_classify
	1	woltka_gotu
	14
Select jobs to execute...

[Fri Jan  8 11:40:29 2021]
rule fastp_se:
    input: ../../../raw_fastqs/ERR2242499.fastq.gz
    output: ../results/QC_reads/ERR2242499_fastp.fastq, ../results/QC_reads/failed/ERR2242499_failed.fastq, ../results/QC_reads/report/ERR2242499_fastp.json, ../results/QC_reads/report/ERR2242499.html
    log: ../results/logs/fastp/se/ERR2242499.log
    jobid: 2
    benchmark: ../results/benchmarks/fastp/se/ERR2242499.tsv
    wildcards: sample=ERR2242499
    threads: 6

[Fri Jan  8 11:40:59 2021]
Finished job 2.
1 of 14 steps (7%) done
Select jobs to execute...

[Fri Jan  8 11:40:59 2021]
rule fastp_se:
    input: ../../../raw_fastqs/ERR2242481.fastq.gz
    output: ../results/QC_reads/ERR2242481_fastp.fastq, ../results/QC_reads/failed/ERR2242481_failed.fastq, ../results/QC_reads/report/ERR2242481_fastp.json, ../results/QC_reads/report/ERR2242481.html
    log: ../results/logs/fastp/se/ERR2242481.log
    jobid: 3
    benchmark: ../results/benchmarks/fastp/se/ERR2242481.tsv
    wildcards: sample=ERR2242481
    threads: 6

[Fri Jan  8 11:41:33 2021]
Finished job 3.
2 of 14 steps (14%) done
Select jobs to execute...

[Fri Jan  8 11:41:33 2021]
rule minimap2_index:
    input: ../../../prebuilt_data/GCA_000001405.15_GRCh38_genomic.fna.gz, ../results/QC_reads/ERR2242499_fastp.fastq, ../results/QC_reads/ERR2242481_fastp.fastq
    output: ../results/minimap2/index/GRCh38.mmi
    log: ../results/logs/minimap2/index/GRCh38.mmi.log
    jobid: 8
    benchmark: ../results/benchmarks/minimap/index/GRCh38.mmi.tsv
    threads: 3

[Fri Jan  8 11:41:33 2021]
rule multiqc:
    input: ../results/QC_reads/report/ERR2242499_fastp.json, ../results/QC_reads/report/ERR2242481_fastp.json
    output: ../results/multiqc/multiqc_report.html
    log: ../results/logs/multiqc.log
    jobid: 1

[Fri Jan  8 11:41:33 2021]
Error in rule minimap2_index:
    jobid: 8
    output: ../results/minimap2/index/GRCh38.mmi
    log: ../results/logs/minimap2/index/GRCh38.mmi.log (check log file(s) for error message)

RuleException:
NameError in line 69 of /klaster/scratch/kkopera/COVID/microbiome/snakemake/QC_and_FT_advanced/polish-microbiome-project/shallow-shotgun-analysis-workflow/workflow/Snakefile:
name 'config' is not defined
  File "/home/kkopera/.conda/envs/snakemake/lib/python3.6/site-packages/snakemake/executors/__init__.py", line 2285, in run_wrapper
  File "/klaster/scratch/kkopera/COVID/microbiome/snakemake/QC_and_FT_advanced/polish-microbiome-project/shallow-shotgun-analysis-workflow/workflow/Snakefile", line 69, in __rule_minimap2_index
  File "/home/kkopera/.conda/envs/snakemake/lib/python3.6/site-packages/snakemake/executors/__init__.py", line 560, in _callback
  File "/home/kkopera/.conda/envs/snakemake/lib/python3.6/concurrent/futures/thread.py", line 56, in run
  File "/home/kkopera/.conda/envs/snakemake/lib/python3.6/site-packages/snakemake/executors/__init__.py", line 546, in cached_or_run
  File "/home/kkopera/.conda/envs/snakemake/lib/python3.6/site-packages/snakemake/executors/__init__.py", line 2351, in run_wrapper
ImproperOutputException in line 43 of /klaster/scratch/kkopera/COVID/microbiome/snakemake/QC_and_FT_advanced/polish-microbiome-project/shallow-shotgun-analysis-workflow/workflow/Snakefile:
Outputs of incorrect type (directories when expecting files or vice versa). Output directories must be flagged with directory(). for rule multiqc:
../results/multiqc/multiqc_report.html
  File "/home/kkopera/.conda/envs/snakemake/lib/python3.6/site-packages/snakemake/executors/__init__.py", line 575, in handle_job_success
  File "/home/kkopera/.conda/envs/snakemake/lib/python3.6/site-packages/snakemake/executors/__init__.py", line 254, in handle_job_success
Removing output files of failed job multiqc since they might be corrupted:
../results/multiqc/multiqc_report.html
Skipped removing non-empty directory ../results/multiqc/multiqc_report.html
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /klaster/scratch/kkopera/COVID/microbiome/snakemake/QC_and_FT_advanced/polish-microbiome-project/shallow-shotgun-analysis-workflow/workflow/.snakemake/log/2021-01-08T114029.488467.snakemake.log
